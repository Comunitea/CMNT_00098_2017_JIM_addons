<?xml version="1.0" encoding="utf-8"?>

<templates id="template_new_order" inherit_id="telesale.template_new_order">

    <!-- Add route and lqdr field to ProductInfoWidget -->
    <t t-extend="ProductInfo-Order-Widget">
        <t t-jquery="tr:last" t-operation="append">
            <tr>
                <th scope="row">Warehouse</th>
                <td><t t-esc="widget.route"/></td>
            </tr>
            <tr>
                <th scope="row">LQDR</th>
                <td><t t-esc="widget.lqdr"/></td>
            </tr>
        </t>
    </t>

    <!-- Add states Pending Approval and LQDR to order Widget -->
    <t t-extend="Order-Widget">
        <t t-jquery=".span-state" t-operation="append">
            <t t-if="widget.ts_model.get('selectedOrder').get('state') == 'lqdr'">
                (LQDR)
            </t>
            <t t-if="widget.ts_model.get('selectedOrder').get('state') == 'pending'">
                (Pending Approval)
            </t>
        </t>
    </t>

    <!-- Add column global stock to order lines -->
    <t t-extend="Order-Widget">
        <t t-jquery=".header-product" t-operation="after">
            <th class="header-global-stock">Available</th>
        </t>
    </t>

    <t t-extend="Order-line-Widget">
        <t t-jquery=".cell-product" t-operation="after">
             <td class="cell-global-stock">
                <input type="search" class='col-global-stock' readonly="True" t-att-value="widget.model.get('global_available_stock').toFixed(2)"/>
            </td>
        </t>
    </t>

</templates>
