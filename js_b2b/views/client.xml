<?xml version="1.0" encoding="UTF-8"?>
<odoo>

	<!-- FORMULARIO -->

	<record id="js_b2b_clients_form" model="ir.ui.view">
		<field name="name">b2b.client.form</field>
		<field name="model">b2b.client</field>
		<field name="arch" type="xml">
			<form string="Client">
				<sheet>
					<div class="oe_button_box" name="button_box">
						<button name="toggle_send" type="object" class="oe_stat_button" icon="fa-paper-plane">
							<field name="send" widget="boolean_button" options="{ 'terminology': { 'string_true': 'Can Send', 'string_false': 'Can not Send' }}"/>
						</button>
						<button name="toggle_active" type="object" class="oe_stat_button" icon="fa-google">
							<field name="active" widget="boolean_button" options="{ 'terminology': 'active' }"/>
						</button>
					</div>
					<group>
						<field name="partner" attrs="{ 'readonly': [('iam_sa', '!=', False)] }"/>
						<field name="iam_sa" widget="js_clipboard" attrs="{ 'invisible': [('iam_sa', '==', False)] }"/>
						<field name="iam_key" attrs="{ 'invisible': [('iam_sa', '==', False)] }"/>
						<field name="items" widget="many2many">
							<tree>
								<field name="name"/>
								<field name="active"/>
							</tree>
						</field>
					</group>
				</sheet>
			</form>
		</field>
	</record>

	<!-- LISTADO -->

	<record id="js_b2b_clients_tree" model="ir.ui.view">
		<field name="name">b2b.client.tree</field>
		<field name="model">b2b.client</field>
		<field name="arch" type="xml">
			<tree string="parameters">
				<field name="partner"/>
				<field name="send"/>
				<field name="active"/>
				<field name="items"/>
			</tree>
		</field>
	</record>

	<!-- VISTAS -->

	<record id="js_b2b_clients" model="ir.actions.act_window">
		<field name="name">B2B Clients</field>
		<field name="type">ir.actions.act_window</field>
		<field name="context">{ 'active_test': False }</field>
		<field name="res_model">b2b.client</field>
		<field name="view_type">form</field>
		<field name="view_mode">tree,form</field>
		<field name="help" type="html">
		  <p class="oe_view_nocontent_create">
			Push here to create a new client
		  </p><p>
			The clients with <b>active</b> status can receive data from suscriptions or webhooks
		  </p>
		</field>
	</record>

	<!-- ACCIONES DE MENÃš -->

	<menuitem id="js_b2b_clients_action" name="Clients" parent="js_b2b_menu" sequence="20" action="js_b2b_clients" groups="base_technical_features.group_technical_features"  />

</odoo>
